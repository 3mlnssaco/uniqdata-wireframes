# 2차 미팅 기반 와이어프레임 변경점 매핑

> **작성일:** 2026-02-15
> **기준:** 서울대병원 2차 미팅 (2/13) Yohan + 김정연 피드백
> **목적:** 기존 14개 와이어프레임 페이지별 필요 변경사항 정리

---

## 요약: 변경 규모

| 변경 유형 | 페이지 수 | 비고 |
|-----------|----------|------|
| 🔴 구조적 재설계 | 4 | create.html, create-step3, create-step4, create-step6 |
| 🟡 중간 수정 | 5 | create-step2, create-step5, data-overview, data-table, list |
| 🟢 소폭 수정/유지 | 3 | action-center, analysis-discovery, research-amend |
| ⚫ 삭제 검토 | 2 | clean-room, edit (스코프 축소 시) |

**총 변경 비율: 14개 중 11개 (약 79%)**

---

## 🔴 구조적 변경 (Critical)

### 1. create.html (Step 1: AI 인터뷰)

**현재:** 하나의 AI 인터뷰 → 6스텝 선형 진입

**Yohan 피드백:**
> "레트로스펙티브하고 프로스펙티브하고 이게 굉장히 다르다"

**변경 필요:**
- [ ] **연구 유형 분기점 추가** — AI 인터뷰 시작 전 또는 직후에 Retrospective / Prospective 선택
- [ ] Retrospective 선택 시 → Step 3(데이터 수집), Step 4(타겟 설정) 스킵 가능하도록
- [ ] Prospective 선택 시 → 전체 6스텝 유지 (단, 비선형 탐색 가능)
- [ ] 6스텝 진행 바를 **비선형 네비게이션**으로 변경 — 아무 스텝이나 클릭 가능, 완료된 스텝 체크 표시
- [ ] 사이드바의 연구 예시(당뇨 외) 유지하되, 더 다양한 유형 추가

**변경 규모:** ★★★★★ (구조적 재설계)

---

### 2. create-step3.html (Step 3: 데이터 수집)

**현재:** CGM, 심박수, 걸음수, 식단 사진 등 Prospective용 데이터 수집 항목 설계

**Yohan 피드백:**
> Retrospective 연구에서는 "이미 존재하는 데이터"를 사용 → 데이터 수집 자체가 불필요

**변경 필요:**
- [ ] **Retrospective 모드:** 이 페이지 자체가 "기존 데이터 선택" UI로 전환
  - 병원 내 EMR/CDM 데이터 선택 (OMOP CDM 테이블 기반)
  - 기간 범위 설정 (언제부터 언제까지의 데이터)
  - Person, Condition, Drug, Measurement 테이블 선택
- [ ] **Prospective 모드:** 현재 UI 대부분 유지, 단 범용화 필요
  - CGM/혈당 → "웨어러블 디바이스 데이터" 로 일반화
  - 식단 사진/복약 기록 → "참여자 입력 데이터" 카테고리로
- [ ] EMA 빈도 설정은 Prospective에서만 표시
- [ ] 참여자 부담도 계산기는 Prospective에서만 표시

**변경 규모:** ★★★★★ (이중 모드 설계)

---

### 3. create-step4.html (Step 4: 타겟 설정)

**현재:** 참여자 모집 비율 슬라이더, 사전초대 vs 공개모집, 모집 프리뷰

**Yohan 피드백:**
> "레트로스펙티브는 참여자 모집 불필요 (데이터가 이미 있음)"

**변경 필요:**
- [ ] **Retrospective 모드:** 이 페이지를 "데이터 코호트 정의"로 변경
  - 포함/제외 기준 설정 (연령, 진단코드, 기간 등)
  - 데이터 볼륨 프리뷰 ("이 조건에 해당하는 환자 데이터: 약 2,340건")
  - 모집 슬라이더, 전화 프리뷰 모두 불필요
- [ ] **Prospective 모드:** 현재 UI 대부분 유지
  - 단, T2DM 1,200명 같은 특정 질환 하드코딩 제거
  - 건강 태그 필터를 더 범용적으로

**변경 규모:** ★★★★★ (이중 모드 설계)

---

### 4. create-step6.html (Step 6: 에스크로)

**현재:** XRP 에스크로 예치 → IRB비 + 참여자 보상 + 플랫폼 수수료

**Yohan 피드백:**
> Retrospective는 참여자 보상 불필요 → 에스크로 구조 자체가 다름
> "과거 데이터 판매" 모델이면 돈 흐름이 반대

**변경 필요:**
- [ ] **Retrospective 모드:**
  - 참여자 보상 행 제거 (데이터가 이미 병원에 있으므로)
  - IRB비 + 플랫폼 이용료만 → 에스크로 금액 대폭 감소
  - 모집 실행 섹션 제거
- [ ] **과거 데이터 마켓 모드 (미래):**
  - 연구자 → 플랫폼 예치 → 데이터 제공자에게 지급
  - 완전히 다른 자금 흐름 UI 필요 (현재는 미구현)
- [ ] XRP 금액 예시를 현실적으로 조정 (7,740 XRP가 적절한지)

**변경 규모:** ★★★★☆ (모드별 분기)

---

## 🟡 중간 수정

### 5. create-step2.html (Step 2: 연구 설계)

**현재:** 가설, 방법론, 참여자 조건 — 당뇨 예시 중심

**변경 필요:**
- [ ] 당뇨 특화 예시(MAGE, HbA1c, TIR) → 범용 플레이스홀더로 변경
- [ ] "저탄수화물 식단" 개입 → 예시를 2-3개 교차 표시
- [ ] **비선형 탐색:** Step 1 완료 없이도 접근 가능하도록
- [ ] IRB를 넓게 잡는 전략 반영 → "IRB 커버리지 체크" 가이드 추가 가능
  > "IRB 쓸 때부터 좀 최대한 넓게 잡아라"

**변경 규모:** ★★★☆☆

---

### 6. create-step5.html (Step 5: IRB 심의)

**현재:** AI가 면제/일반/간이 자동 분류, 수수료 표시

**Yohan 피드백:**
> "IRB 쓰는 거 도와주는 거는 진짜 도움이 될 거 같다"
> 하지만 Retrospective는 "어지간해서는 막 건드는 거 같지 않던데"

**변경 필요:**
- [ ] Retrospective 모드에서는 → 면제/간이 가능성 높음 안내
- [ ] Prospective 모드에서는 → 현재 UI 유지 + IRB 작성 도우미 강화
- [ ] IRB 초안 자동 생성 기능 강조 (현재 약한 부분)
- [ ] "넓게 잡기" 전략 안내 문구 추가
- [ ] 연구 변경 시 재승인 vs 수정보고 판단 가이드

**변경 규모:** ★★★☆☆

---

### 7. data-overview.html (데이터 개요)

**현재:** Phase 1/2 타임라인, KPI 카드, 그룹 비교, 트렌드 차트 — 체중/HbA1c 중심

**Yohan 피드백:**
> "시각화해서 보여주면 좋죠. 바로바로 시각화해서 볼 수 있으면"
> "시계열 그래프 + 히스토그램(빈도) → 연구자가 가장 먼저 확인"
> "너무 특정 데이터에만 맞춰서 만들어진 거 같은 느낌"

**변경 필요:**
- [ ] **범용 데이터 시각화로 전환**
  - 체중/HbA1c 하드코딩 → 동적 변수 선택 드롭다운
  - 어떤 데이터든 시계열 그래프 자동 생성
  - 히스토그램(빈도 분포) 디폴트 추가
- [ ] Phase 1/2 구조 → 연구 유형에 따라 다른 뷰
  - Retrospective: 전체 기간 데이터 탐색 뷰
  - Prospective: 현재의 Phase 기반 뷰 유지
- [ ] OMOP CDM 구조 반영 가능하도록 테이블/컬럼 매핑
- [ ] AI 인사이트 패널은 유지 (긍정적 피드백)

**변경 규모:** ★★★☆☆

---

### 8. data-table.html (데이터 테이블)

**현재:** 참여자별 행, 당뇨 특화 컬럼 (MAGE, HbA1c, 공복혈당, CGM TIR%, 복약순응도)

**Yohan 피드백:**
> "너무 특정 데이터에만 지금 맞춰서 만들어진 거 같은 느낌"

**변경 필요:**
- [ ] **동적 컬럼 구조로 전환**
  - 고정 컬럼 (ID, 그룹, 기본 인구통계) + 연구별 가변 컬럼
  - MAGE/HbA1c 하드코딩 제거 → 연구 데이터에 따라 자동 구성
- [ ] 컬럼 추가/제거/순서변경 가능 UI
- [ ] OMOP CDM 매핑 시 Person/Condition/Drug/Measurement 자동 표시
- [ ] 107KB 파일 → 최적화도 필요 (현재 와이어프레임 중 가장 큰 파일)

**변경 규모:** ★★★☆☆

---

### 9. list.html (연구 목록)

**현재:** 연구 카드 리스트, 상태 필터, 사이드바 네비

**변경 필요:**
- [ ] 연구 카드에 **Retrospective/Prospective 태그** 추가
- [ ] 필터에 연구 유형 추가
- [ ] 진행률 표시를 비선형 구조에 맞게 조정 (6스텝 진행바 → 완료항목 체크)

**변경 규모:** ★★☆☆☆

---

## 🟢 소폭 수정/유지

### 10. action-center.html
- 알림/조치 센터 → 대부분 유지 가능
- [ ] 알림 유형에 Retrospective 관련 항목 추가 (데이터 추출 완료 등)

### 11. analysis-discovery.html
- AI 분석 허브 → 긍정적 피드백 받은 부분
- [ ] 범용 데이터 분석으로 예시만 교체
- [ ] 83KB → 최적화 필요

### 12. research-amend.html
- 연구 수정/변경 관리 → Yohan의 "오락가락" 피드백에 오히려 부합
- [ ] IRB 재승인 vs 수정보고 판단 로직 추가

---

## ⚫ 삭제/후순위 검토

### 13. clean-room.html
**Yohan 피드백:**
> "먼저 다른 거부터 해결하시고" (FL/클린룸은 후순위)

- [ ] MVP에서 제외 검토
- [ ] "Coming Soon" 또는 완전 제거

### 14. edit.html
- 연구 편집 페이지 → create 흐름이 바뀌면 같이 변경 필요
- [ ] create 변경 완료 후 동기화

---

## 크로스커팅 변경 (전체 적용)

### A. 비선형 네비게이션 (모든 create 페이지)
**현재:** Step 1 → 2 → 3 → 4 → 5 → 6 강제 순서 + "다음" 버튼
**변경:** 상단 스텝바에서 아무 스텝이나 클릭 가능, 완료/미완료 표시

### B. 당뇨 특화 콘텐츠 범용화 (대부분 페이지)
- MAGE, HbA1c, TIR, CGM → 범용 플레이스홀더
- 저탄수화물 식단 → 다양한 개입 예시
- T2DM 필터 → 범용 건강조건 필터

### C. 연구 유형 분기 (create 전체)
- Retrospective 경로: Step1 → Step2 → (Step3 변형) → Step5 → (Step6 간소화)
- Prospective 경로: Step1 → Step2 → Step3 → Step4 → Step5 → Step6 (현재와 유사)

### D. OMOP CDM 반영 (data 페이지)
- Person/Concept/Condition/Drug/Measurement 테이블 구조 반영
- Retrospective 데이터 조회 시 CDM 기반 필터

---

## 우선순위 제안

### Phase 1 (즉시 — 스코프 결정 후)
1. create.html — 연구 유형 분기점 추가
2. 비선형 네비게이션 전환 (모든 create 페이지)
3. list.html — 연구 유형 태그

### Phase 2 (단기 — 2주)
4. create-step3 — Retrospective 모드 추가
5. create-step4 — Retrospective 모드 추가
6. create-step6 — 모드별 에스크로 분기
7. data-table — 동적 컬럼

### Phase 3 (중기 — 1개월)
8. data-overview — 범용 시각화
9. create-step2 — 범용화
10. create-step5 — IRB 도우미 강화
11. clean-room — 삭제 또는 후순위

---

## 핵심 결론

> **변경이 많은 이유:** 기존 와이어프레임은 **"Prospective 당뇨 연구"** 하나의 시나리오에 최적화되어 있었음.
> 2차 미팅에서 확인된 현실은:
> 1. **Retrospective가 주류** (Yohan 연구실 대부분)
> 2. **연구 프로세스는 비선형**
> 3. **범용 데이터 지원 필수**
>
> → 와이어프레임의 **뼈대(6스텝 구조)** 자체는 유지 가능하나,
> **내용물(데이터, 흐름, 모드)** 은 거의 전면 수정 필요.
